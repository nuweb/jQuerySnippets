<!doctype html>
<html>
<head>
	<meta charset=utf-8>
	<title>day19: $.each and Templating</title>
</head>
<body>
<!--HTML TEMPLATE-->
<script id="blogTemplate" type="conde/template">
	<h2>{{title}}</h2>
	<img src="{{thumbnail}}" alt="{{title}}">
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<script>
// Day 19: $.each and templating
// Creating HTML in the JavaScript is messy, seperate that out of JS
(function(){
	var content = [
		{
			title: 'My awesome blog post',
			thumbnail: 'http://d2o0t5hpnwv4c1.cloudfront.net/1137_terminal/preview.png',
		},
		{
			title: 'My second awesome blog post',
			thumbnail: 'http://d2o0t5hpnwv4c1.cloudfront.net/1133_newrelic/200.jpg',
		},
		{
			title: 'My third blog post',
			thumbnail: 'http://d2o0t5hpnwv4c1.cloudfront.net/1137_terminal/preview.png',
		}
	],
	// reference to the template, also remove whitespace
	template = $.trim($('#blogTemplate').html()),
	frag = '';
	// param1 - array we are working with, param2 - function to run on that array
	// Don't manipulate the dom in every iteration, so move dom append outside $.each
	$.each(content, function(index, obj){
		// i - ignore case, g - replace globally
		frag += template.replace( /{{title}}/ig, obj.title )
							.replace(/{{thumbnail}}/, obj.thumbnail);
	});
	$(document.body).append(frag);
})();
</script>
</body>
</html>






